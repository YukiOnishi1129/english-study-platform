# **画面遷移図**

**【英語学習アプリ側】**



┌─────────────────────────────────────────────────────────┐
│                     ログイン画面                          │
│                  (Google認証ボタン)                       │
└─────────────────┬───────────────────────────────────────┘
                  │ログイン成功
                  ↓
┌─────────────────────────────────────────────────────────┐
│                  ダッシュボード画面                        │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 学習統計サマリー                                    │  │
│  │ - 今日の学習: X問                                  │  │
│  │ - 累計正答率: XX%                                  │  │
│  │ - 総学習数: XXX問                                  │  │
│  │ - 学習カレンダー（ヒートマップ）                    │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材一覧                                           │  │
│  │ [教材カード: 英会話フレーズ] ───→ 選択             │  │
│  │ [教材カード: 基礎文法]                             │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │教材を選択
                  ↓
┌─────────────────────────────────────────────────────────┐
│               教材詳細画面（Material）                     │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材名: 英会話フレーズ                              │  │
│  │ 説明: ...                                          │  │
│  │ 進捗: XX%                                          │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 章一覧（階層構造）                                  │  │
│  │ └─ 第1章 定型フレーズ編                            │  │
│  │    ├─ 基本挨拶 ───→ 選択                          │  │
│  │    └─ 日常会話                                     │  │
│  │ └─ 第2章 文法活用編                                │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │章を選択
                  ↓
┌─────────────────────────────────────────────────────────┐
│                章詳細画面（Chapter）                       │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 章名: 第1章 > 基本挨拶                              │  │
│  │ 進捗: XX%                                          │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ UNIT一覧                                           │  │
│  │ [UNITカード: UNIT1 1語フレーズ (9問)] ───→ 選択   │  │
│  │ [UNITカード: UNIT7 挨拶 (12問)]                   │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │UNITを選択
                  ↓
┌─────────────────────────────────────────────────────────┐
│              UNIT詳細画面（Unit）                          │
│  ┌───────────────────────────────────────────────────┐  │
│  │ UNIT名: UNIT1 1語フレーズ                          │  │
│  │ 問題数: 9問                                        │  │
│  │ 正答率: XX%                                        │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ アクション選択                                      │  │
│  │ [ボタン: 順番に学習する] ───→ 学習開始            │  │
│  │ [ボタン: ランダムに学習する] ───→ 学習開始        │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 問題一覧（プレビュー）                              │  │
│  │ 1. わかりました (正答率: XX%)                      │  │
│  │ 2. ありがとう (正答率: XX%)                        │  │
│  │ ...                                                │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │学習開始
                  ↓
┌─────────────────────────────────────────────────────────┐
│             問題解答画面（Question）                       │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 進捗: 問題 1/9                                     │  │
│  │ 問題: わかりました                                  │  │
│  │ [ボタン: ヒントを見る]                             │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ あなたの解答（英語）                                │  │
│  │ [テキスト入力欄]                                   │  │
│  │ [ボタン: 解答する]                                 │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │解答送信
                  ↓
┌─────────────────────────────────────────────────────────┐
│            判定結果画面（Answer Result）                   │
│  ┌───────────────────────────────────────────────────┐  │
│  │ ✓ 正解！ / ✗ 不正解                                │  │
│  │ あなたの解答: Okay.                                │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 正解:                                              │  │
│  │ - Okay. [🔊音声再生]                               │  │
│  │ - OK. [🔊音声再生]                                 │  │
│  │ - Got it. [🔊音声再生]                             │  │
│  │ [ボタン: 実は正解だった（手動修正）]              │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 解説:                                              │  │
│  │ 承諾を示す基本表現です。OkayとOKは同じ意味...     │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ アクション                                          │  │
│  │ [ボタン: 過去の解答を見る] ───→ 履歴モーダル      │  │
│  │ [ボタン: 次の問題へ] ───→ 次の問題画面            │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │次の問題へ（繰り返し）
                  ↓
            問題解答画面に戻る
                  │全問終了
                  ↓
┌─────────────────────────────────────────────────────────┐
│              学習完了画面（Study Result）                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ お疲れさまでした！                                  │  │
│  │ 結果: 9問中7問正解（正答率: 78%）                  │  │
│  │ 学習時間: 5分                                      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ アクション                                          │  │
│  │ [ボタン: もう一度学習する] ───→ UNIT詳細画面      │  │
│  │ [ボタン: 他のUNITを選ぶ] ───→ 章詳細画面          │  │
│  │ [ボタン: ダッシュボードに戻る] ───→ ダッシュボード │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘


【管理画面側】

```
┌─────────────────────────────────────────────────────────┐
│                管理画面トップ（Admin）                     │
│                   (role=adminのみアクセス可)               │
│  ┌───────────────────────────────────────────────────┐  │
│  │ システム統計                                        │  │
│  │ - 総ユーザー数: XX名                               │  │
│  │ - 総問題数: XXX問                                  │  │
│  │ - 総教材数: X件                                    │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材管理                                           │  │
│  │ [ボタン: 新しい教材を作成] ───→ 教材作成画面      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材一覧                                           │  │
│  │ [教材カード: 英会話フレーズ] ───→ 選択            │  │
│  │   ├ [編集] [削除]                                 │  │
│  │ [教材カード: 基礎文法]                             │  │
│  │   ├ [編集] [削除]                                 │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │教材を選択
                  ↓
┌─────────────────────────────────────────────────────────┐
│         管理画面: 教材詳細画面（Material）                 │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材名: 英会話フレーズ                              │  │
│  │ [ボタン: 教材情報を編集]                           │  │
│  │ [ボタン: CSVで問題をインポート] ───→ CSV画面      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 章・UNIT・問題の構成プレビュー（ツリー表示）        │  │
│  │ └─ 第1章 定型フレーズ編                            │  │
│  │    ├─ 基本挨拶                                     │  │
│  │    │  └─ UNIT1 1語フレーズ (9問)                  │  │
│  │    └─ 日常会話                                     │  │
│  │       └─ UNIT2 自己紹介 (15問)                    │  │
│  │ └─ 第2章 文法活用編                                │  │
│  │    └─ 現在進行形                                   │  │
│  │       └─ UNIT3 現在進行形の基礎 (20問)            │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │CSVインポートを選択
                  ↓
┌─────────────────────────────────────────────────────────┐
│       CSV一括インポート画面（CSV Upload）                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ ステップ1: CSVファイルアップロード                  │  │
│  │ [ファイル選択ボタン]                               │  │
│  │ [ボタン: アップロード] ───→ プレビューへ          │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │アップロード
                  ↓
┌─────────────────────────────────────────────────────────┐
│      CSVプレビュー＆編集画面（CSV Preview）                │
│  ┌───────────────────────────────────────────────────┐  │
│  │ ステップ2: インポート内容の確認と編集               │  │
│  │ この構成でデータを取り込みます                      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 教材: 英会話フレーズ                                │  │
│  │ └─ 第1章/定型フレーズ編                            │  │
│  │    └─ UNIT1 1語フレーズ                           │  │
│  │       ├─ 問題1: わかりました                       │  │
│  │       │  正解1: Okay. [編集可]                    │  │
│  │       │  正解2: OK. [編集可]                      │  │
│  │       │  ヒント: 1語で表現 [編集可]               │  │
│  │       │  解説: 承諾を示す... [編集可]             │  │
│  │       ├─ 問題2: ありがとう                         │  │
│  │       │  ...                                      │  │
│  │    └─ UNIT2 朝の挨拶                              │  │
│  │       ├─ 問題1: おはよう                           │  │
│  │       │  ...                                      │  │
│  │ 合計: 章3個、UNIT5個、問題45個                      │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ アクション                                          │  │
│  │ [ボタン: キャンセル]                               │  │
│  │ [ボタン: この内容でインポートする] ───→ DB登録    │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────────────┘
                  │インポート実行
                  ↓
┌─────────────────────────────────────────────────────────┐
│         インポート完了画面（Import Result）                │
│  ┌───────────────────────────────────────────────────┐  │
│  │ ✓ インポートが完了しました                          │  │
│  │ 章: 3個、UNIT: 5個、問題: 45個を登録しました        │  │
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ [ボタン: 教材詳細に戻る] ───→ 教材詳細画面        │  │
│  │ [ボタン: 管理画面トップに戻る] ───→ 管理トップ    │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘


OOUIの観点での設計ポイント

### 【学習アプリ側】

### オブジェクト（名詞）の階層

```
Material（教材）
  ↓
Chapter（章）
  ↓
Unit（ユニット）
  ↓
Question（問題）

```

### 設計原則

1. **オブジェクトファースト**: まず教材を選び、次に章、次にUNIT、最後に問題
2. **コンテキストの保持**: どの教材・章・UNITにいるかを常に表示
3. **オブジェクトの詳細表示**: 各階層でオブジェクトの状態（進捗、正答率）を表示
4. **アクションは後**: オブジェクトを選んでから、「順番に学習」「ランダムに学習」などのアクションを選択

---

### 【管理画面側】

### オブジェクト（名詞）の階層

```
Material（教材）
  ↓
CSV Data（CSVデータ）
  ↓
Preview（プレビュー内容）
```

### 設計原則

1. **教材単位での管理**: 教材を選んでから、その配下のデータをインポート
2. **プレビューで確認**: CSVの内容をオブジェクトとして可視化し、編集可能に
3. **一括操作の明示**: 「この構成で取り込む」という明確なアクション
4. **結果の可視化**: インポート後の結果を数値で表示